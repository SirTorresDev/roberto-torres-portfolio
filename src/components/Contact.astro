---
const socialLinks = [
  { name: 'LinkedIn', icon: 'ion-social-linkedin', url: 'https://www.linkedin.com/in/roberto-torres', color: '#0077b5' },
  { name: 'GitHub', icon: 'ion-social-github', url: 'https://github.com/robertotorres', color: '#333' },
  { name: 'Twitter', icon: 'ion-social-twitter', url: 'https://twitter.com/robertotorres', color: '#1da1f2' },
  { name: 'Instagram', icon: 'ion-social-instagram-outline', url: 'https://instagram.com/robertotorres', color: '#e4405f' }
];
---

<section id="contact" class="paralax-mf footer-paralax bg-image sect-mt4 route">
  <div class="overlay-mf"></div>
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div class="contact-mf">
          <div id="contact" class="box-shadow-full">
            <div class="row">
              <!-- Contact Form -->
              <div class="col-md-6">
                <div class="title-box-2">
                  <h5 class="title-left">Send Message</h5>
                </div>
                <div>
                  <form id="contact-form" class="contactForm">
                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <div class="form-group">
                          <input 
                            type="text" 
                            name="name" 
                            class="form-control" 
                            id="name" 
                            placeholder="Roberto Torres" 
                            required
                          />
                        </div>
                      </div>
                      
                      <div class="col-md-12 mb-3">
                        <div class="form-group">
                          <input 
                            type="email" 
                            class="form-control" 
                            name="email" 
                            id="email" 
                            placeholder="robertotorrespren@outlook.es" 
                            required
                          />
                        </div>
                      </div>
                      
                      <div class="col-md-12 mb-3">
                        <div class="form-group">
                          <input 
                            type="text" 
                            class="form-control" 
                            name="subject" 
                            id="subject" 
                            placeholder="Subject" 
                            required
                          />
                        </div>
                      </div>
                      
                      <div class="col-md-12">
                        <div class="form-group">
                          <textarea 
                            class="form-control" 
                            name="message" 
                            rows="5" 
                            placeholder="Message" 
                            required
                          ></textarea>
                        </div>
                      </div>
                      
                      <div class="col-md-12 text-center my-3">
                        <button id="submit-btn" type="submit" class="btn-primary">Send Message</button>
                      </div>
                    </div>
                  </form>
                  <div id="status-message" class="status-message" style="display:none;"></div>
                </div>
              </div>
              
              <!-- Contact Info -->
              <div class="col-md-6">
                <div class="title-box-2 pt-4 pt-md-0">
                  <h5 class="title-left">Get in Touch</h5>
                </div>
                <div class="more-info">
                  <p class="lead">
                    Feel free to reach out for collaborations or just a friendly hello.
                  </p>
                  <ul class="list-ico">
                    <li>
                      <span class="ion-ios-location"></span> Madrid, Spain
                    </li>
                    <li>
                      <span class="ion-ios-telephone"></span> +34 692229025
                    </li>
                    <li>
                      <span class="ion-email"></span> robertotorrespren@outlook.es
                    </li>
                  </ul>
                </div>
                <div class="socials">
                  <ul>
                    {socialLinks.map(social => (
                      <li>
                        <a 
                          href={social.url} 
                          target="_blank" 
                          rel="noopener noreferrer"
                          style={`--social-color: ${social.color}`}
                          aria-label={social.name}
                        >
                          <span class={social.icon}></span>
                        </a>
                      </li>
                    ))}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .footer-paralax {
    padding: 4rem 0 0;
  }
  
  .contact-mf {
    margin-top: 4rem;
  }
  
  .col-sm-12 {
    flex: 0 0 100%;
    max-width: 100%;
  }
  
  .col-md-6 {
    flex: 0 0 50%;
    max-width: 50%;
  }
  
  .col-md-12 {
    flex: 0 0 100%;
    max-width: 100%;
  }
  
  .mb-3 {
    margin-bottom: 1rem;
  }
  
  .my-3 {
    margin: 1rem 0;
  }
  
  .form-group {
    margin-bottom: 1rem;
  }
  
  .form-control {
    display: block;
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    line-height: 1.5;
    color: var(--text);
    background-color: #fff;
    border: 1px solid #ced4da;
    border-radius: 5px;
    transition: var(--transition);
  }
  
  .form-control:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 0.2rem rgba(0, 120, 255, 0.25);
  }
  
  textarea.form-control {
    resize: vertical;
    min-height: 120px;
  }
  
  .more-info {
    margin-bottom: 2rem;
  }
  
  .list-ico {
    list-style: none;
    padding: 0;
    margin: 2rem 0;
  }
  
  .list-ico li {
    padding: 0.75rem 0;
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text);
  }
  
  .list-ico li span {
    color: var(--primary);
    font-size: 1.5rem;
  }
  
  .socials ul {
    list-style: none;
    padding: 0;
    display: flex;
    gap: 1rem;
  }
  
  .socials a {
    width: 45px;
    height: 45px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-size: 1.5rem;
    transition: var(--transition);
  }
  
  .socials a:hover {
    background: var(--social-color);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }
  
  @media (max-width: 768px) {
    .col-md-6,
    .col-md-12 {
      flex: 0 0 100%;
      max-width: 100%;
    }
    
    .pt-md-0 {
      padding-top: 2rem !important;
    }
  }
</style>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
  const statusMessage = document.getElementById('status-message') as HTMLElement;

  if (form) {
    form.addEventListener('submit', async (e: Event) => {
      e.preventDefault();
      
      if (!submitBtn || !statusMessage) return;
      
      // Disable button
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
      
      const formData = new FormData(form);
      
      try {
        const response = await fetch('https://formspree.io/f/YOUR_FORM_ID', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          statusMessage.className = 'status-message success';
          statusMessage.textContent = '✓ Message sent successfully!';
          statusMessage.style.display = 'block';
          form.reset();
        } else {
          throw new Error('Failed to send message');
        }
      } catch (error) {
        statusMessage.className = 'status-message error';
        statusMessage.textContent = '✗ Failed to send message. Please try again.';
        statusMessage.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
        
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 5000);
      }
    });
  }
</script>